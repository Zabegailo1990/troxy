let canvas=document.getElementById("lavaCanvas"),ctx=canvas.getContext("2d"),blobs=(canvas.width=window.innerWidth,canvas.height=window.innerHeight,[]);class Blob{constructor(a,t,i,s,e){this.x=a,this.y=t,this.radius=i,this.speedX=s,this.speedY=e,this.visible=!0,this.alpha=1,this.fadeSpeed=.01*Math.random()+.002}update(){this.x+=this.speedX,this.y+=this.speedY,(this.x-this.radius<0||this.x+this.radius>canvas.width)&&(this.speedX*=-1),(this.y-this.radius<0||this.y+this.radius>canvas.height)&&(this.speedY*=-1),Math.random()<.002&&(this.visible?(this.alpha-=this.fadeSpeed,this.alpha<=0&&(this.alpha=0,this.visible=!1)):(this.alpha+=this.fadeSpeed,1<=this.alpha&&(this.alpha=1,this.visible=!0)))}}function createBlobs(t){blobs=[];for(let a=0;a<t;a++){var i=100*Math.random()+300,s=Math.random()*canvas.width,e=Math.random()*canvas.height,h=10*(Math.random()-.5),n=10*(Math.random()-.5);blobs.push(new Blob(s,e,i,h,n))}}function metaballEffect(){ctx.clearRect(0,0,canvas.width,canvas.height);var a=ctx.getImageData(0,0,canvas.width,canvas.height),i=a.data;for(let t=0;t<i.length;t+=4){var s,e,h,n=t/4%canvas.width,d=Math.floor(t/4/canvas.width);let a=0;for(s of blobs)s.visible&&(e=n-s.x,h=d-s.y,a+=s.radius*s.radius/(e*e+h*h+1e-4));var o=Math.min(50*a,255);i[t]=214,i[t+1]=229,i[t+2]=255,i[t+3]=o}ctx.putImageData(a,0,0)}function animate(){for(var a of blobs)a.update();metaballEffect(),requestAnimationFrame(animate)}createBlobs(4),animate(),window.addEventListener("resize",()=>{canvas.width=window.innerWidth,canvas.height=window.innerHeight,createBlobs(4)});